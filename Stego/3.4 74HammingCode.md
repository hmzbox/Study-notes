### (7,4)汉明码

汉明码具有一位纠错能力。

设二进制为**n位**，为使其具有纠错能力，需再加**k位**的检测位(也是分组规则)，组成**n+k**位。

新增加的检测位数**k**应满足：

$$2^k ≥n+k+1$$

<div align=center><img src="https://github.com/hmzbox/Study-notes/blob/master/Stego/images/4.4 74HammingCode1.png" width="400"></div>

当$k$的位数确定后，将所要检测的代码分为$P_n$组，分多少个组，我们通过$k$的值来确定($2^{k-1}$)。

假设将要进行检测的二进制为$0101$，位数$n=4$，根据公式$2^k≥n+k+1$可以得出$k$的值是$3$，所以最终汉明码为$n+k=7$位。

**分组的原则：** 应按照$2^{k-1}$。所以分组分为$P_{2^0}、P_{2^1}、P_{2^2}，即：P_1、P_2、P_4$。 

**分组内包含的数的原则：** 将编号数转成二进制从右向左，如果第一位是1，例如编号是1,3,5,7....的就分入第一组，如果第二位是1的，例如编号2,3,6,7,10...的就分入第二组，以此类推将所有的编号分入相应的组中。
<div align=center><img src="https://github.com/hmzbox/Study-notes/blob/master/Stego/images/4.5 74HammingCode2.png" width="400"></div>

他们每一组中包含的位则是：
p1包含（1,3,5,7,9,11,...位）

p2包含（2,3,6,7,10,11,14,15,...位）

p3包含（4,5,6,7,12,13,14,15,...位）

---

#### 配置汉明码（配偶原则）

**例子：0101是如何产生汉明码的（采用配偶原则）**
<div align=center><img src="https://github.com/hmzbox/Study-notes/blob/master/Stego/images/4.6 74HammingCode3.png" width="400"></div>

按照配偶原则来配置汉明码，则C1应使1、3、5、7位中“1”的个数为偶数；C2应使2、3、6、7位中“1”的个数为偶数；C4应使4、5、6、7位中“1”的个数为偶数。
按照上面我所说的则：

C1=③位+⑤位+⑦位，即C1=B4+B3+B1=**0+1+1=0**

C2=③位+⑥位+⑦位，即C2=B4+B2+B1=**0+0+1=1**

C4=⑤位+⑥位+⑦位，即C4=B3+B2+B1=**1+0+1=0**

所以**0101的汉明码**为C1|C2|B4|C4|B3|B2|B1，即**0100101**

#### 配置汉明码（配奇原则，同理）

---

#### 汉明码的纠错

根据配偶原则来对汉明码的纠错。设接收到的错误汉明码（按配偶原则配置）是**0100111**。

<div align=center><img src="https://github.com/hmzbox/Study-notes/blob/master/Stego/images/4.7 74HammingCode4.png" width="400"></div>

对分组进行检测（因配偶原则，分组检测是非偶数数为错误，即**0正确，1错误**）：

P1=①位+③位+⑤位+⑦位，即P1=0+0+1+1=**0**

P2=②位+③位+⑥位+⑦位，即P2=1+0+1+1=**1**

P4=④位+⑤位+⑥位+⑦位，即P4=0+1+1+1=**1**

**两种判断方式（采用第一种）：**
1. P4|P2|P1构成的二进制是110，将110转换成十进制为6，说明是第6位出错。
2. 根据配偶原则的规律，其“1”的个数必须是偶数也能判断出是第6位，所以第六位应将“1”改为“0”，那么正确的汉明码应为0100101。

**提出问题：** 那么为什么在汉明码纠错过程中，P4|P2|P1即指出了编码中错误的信息位？

汉明码属于分组奇偶校验，P4|P2|P1=000，说明生成的校验位和收到的校验位相同，正确。
由于**校验位只参加一组**奇偶校验，**有效信息参加至少两组**奇偶校验。若校验位出错，P4|P2|P1的某**一位**将为1，刚好对应位号4、2、1；若有效信息出错，将引起P4|P2|P1中**至少两位**为1，如B1出错，将使P4|P1均为1，P2=0,P4P2P1=101。

